<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Add Credit - MeriDukaan</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4f7fa;
    }

    .header {
      background-color: #ffffff;
      height: 80px;
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      position: fixed;
      top: 0;
      left: 0;
      z-index: 10;
    }

    .left-section {
      display: flex;
      align-items: center;
    }

    .brand {
      font-size: 28px;
      font-weight: bold;
      color: #2b6cb0;
      margin-right: 30px;
    }

    .nav-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .nav-buttons button {
      padding: 10px 20px;
      border: 1px solid #ccc;
      border-radius: 9999px;
      background-color: white;
      color: #111;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: 0.2s;
      line-height: 1;
      margin-top: 4px;
    }

    .nav-buttons button:hover {
      background-color: #f1f3f4;
    }

    .login-btn {
      background-color: #38a169;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 9999px;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-top: 4px;
    }

    .login-btn:hover {
      background-color: #2f855a;
    }

    
/* Vehicle Type Dropdown styling */
/* Style the select dropdown similar to input fields */
.transporter-form {
   margin-top: 130px;
      padding: 30px 50px;
      max-width: 1100px;
      margin-left: auto;
      margin-right: auto;
      background-color: #ffffff;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      border-radius: 12px;
      margin-bottom: 50px;
      border-left: 6px solid #5b3ce5;
}

.transporter-form h1 {
  text-align: left;
  color: #5b3ce5;
  font-size: 40px;
}

.transporter-form h3 {
  text-align: left;
  font-weight: 400;
  font-size: 16px;
  margin-bottom: 20px;
  color: #666;
}

.transporter-form label {
  display: block;
  margin-top: 15px;
  margin-bottom: 5px;
  font-weight: 500;
  color: #444;
}

.transporter-form input,
.transporter-form select {
  width: 100%;
  padding: 10px;
  border: 1px solid #bbb;
  border-radius: 8px;
  font-size: 14px;
  box-sizing: border-box;
}

.transporter-form button {
  margin-top: 20px;
  width: 100%;
  padding: 12px;
  background-color: #5b3ce5;
  color: #fff;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.3s ease;
}

.transporter-form button:hover {
  background-color:#684edc;
}

.transporter-form .message {
  margin-top: 10px;
  text-align: center;
  font-size: 20px;
  color: green;
}


  </style>
</head>
<body>

  <!-- Header -->
  <div class="header">
    <div class="left-section">
      <div class="brand">MeriDukan</div>
      <div class="nav-buttons">
        <button>üè† Home</button>
        <button>About</button>
        <button>Services</button>
        <button>Contact</button>
      </div>
    </div>
    <button class="login-btn">Login</button>
  </div>

  <!-- Add Transporter Panel -->
<form id="transporterForm" class="transporter-form">
  <h1>Add Transporter</h1>
  <br/>
  <h3>Register a new transporter and vehicle details for deliveries.</h3>

  <label for="transporterName">Transporter Name</label>
  <input type="text" id="transporterName" required placeholder="Enter Transporter Name" pattern="[A-Za-z\s]+" title="Only alphabets and spaces are allowed" oninput="toUpperCaseInput(this)">

  <label for="contactNumber">Contact Number</label>
  <input type="tel" id="contactNumber" required pattern="[0-9]{10}" placeholder="10-digit number">

  <label for="vehicleNumber">Vehicle Number</label>
  <input type="text" id="vehicleNumber" placeholder="e.g., MP09 AB 1234" name="vehicleNumber" oninput="toUpperCaseInput(this)" required>

  <label for="vehicleType">Vehicle Type</label>
  <select id="vehicleType" required>
    <option value="" disabled selected>Select type</option>
    <option value="Mini Truck">Mini Truck</option>
    <option value="Pickup Van">Pickup Van</option>
    <option value="Tempo">Tempo</option>
    <option value="Truck">Truck</option>
    <option value="Other">Other</option>
  </select>

  <label for="route">Route/Area</label>
  <input type="text" id="route" required placeholder="Add Route/Area" oninput="toUpperCaseInput(this)">

  <label for="charges">Approx Delivery Charges (‚Çπ/km)</label>
  <input type="number" id="charges" required placeholder="Approx charges per km">

  <button type="submit">Add Transporter</button>
  <p class="message" id="transporterSuccessMsg"></p>
</form>


<script>

  function toUpperCaseInput(input) {
      input.value = input.value.toUpperCase(); // Converts input value to uppercase
    }
// Function to handle the form submission and save data to localStorage
document.getElementById("transporterForm").addEventListener("submit", function(event) {
  event.preventDefault();  // Prevent form submission

  // Retrieve form data
  const transporterName = document.getElementById("transporterName").value;
  const contactNumber = document.getElementById("contactNumber").value;
  const vehicleNumber = document.getElementById("vehicleNumber").value;
  const vehicleType = document.getElementById("vehicleType").value;
  const route = document.getElementById("route").value;
  const charges = document.getElementById("charges").value;

  // Create transporter object
  const transporterDetails = {
    transporterName,
    contactNumber,
    vehicleNumber,
    vehicleType,
    route,
    charges
  };

  // Get existing transporters or initialize array
  let transporters = JSON.parse(localStorage.getItem("transporters")) || [];

  // Push new transporter
  transporters.push(transporterDetails);

  // Save updated list
  localStorage.setItem("transporters", JSON.stringify(transporters));

  // Show success message
  document.getElementById("transporterSuccessMsg").textContent = "Transporter added successfully!";

  // Clear form
  document.getElementById("transporterForm").reset();

  // Update display
  displayTransporters();

  // Update transporter dropdown in delivery tab if it exists
  updateTransporterDropdown();
});

// Function to display transporters
function displayTransporters() {
  const transporters = JSON.parse(localStorage.getItem("transporters")) || [];
  const transportersList = document.getElementById("transportersList");

  transportersList.innerHTML = "";

  transporters.forEach(transporter => {
    const transporterItem = document.createElement("div");
    transporterItem.classList.add("transporter-item");
    transporterItem.innerHTML = `
      <p><strong>Transporter:</strong> ${transporter.transporterName}</p>
      <p><strong>Contact:</strong> ${transporter.contactNumber}</p>
      <p><strong>Vehicle:</strong> ${transporter.vehicleNumber} (${transporter.vehicleType})</p>
      <p><strong>Route:</strong> ${transporter.route}</p>
      <p><strong>Charges:</strong> ‚Çπ${transporter.charges} per km</p>
      <hr>
    `;
    transportersList.appendChild(transporterItem);
  });
}

// Optional: update the dropdown list in the delivery assignment section
function updateTransporterDropdown() {
  const transporterDropdown = document.getElementById("assignedTransporter");
  const phoneField = document.getElementById("transporterPhone");

  if (!transporterDropdown) return; // Dropdown not present on this page

  // Empty dropdown and add placeholder
  transporterDropdown.innerHTML = "<option value=''>Select Transporter</option>";

  const transporters = JSON.parse(localStorage.getItem("transporters")) || [];

  transporters.forEach(transporter => {
    const option = document.createElement("option");
    option.value = transporter.transporterName;
    option.textContent = transporter.transporterName;
    option.dataset.phone = transporter.contactNumber;  // Store phone number in data attribute
    transporterDropdown.appendChild(option);
  });

  // Listener to update phone number field when transporter is selected
  transporterDropdown.addEventListener("change", function () {
    const selectedOption = transporterDropdown.selectedOptions[0];
    phoneField.value = selectedOption.dataset.phone || "";
  });
}

// Load transporters on page load
window.onload = function () {
  displayTransporters();
  updateTransporterDropdown();  // Useful if tabs are on the same page
};
</script>


</body>
</html>
