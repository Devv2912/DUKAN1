<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Staff Attendance | MeriDukaan</title>
  <style>
     * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4f7fa;
      
    }

       .header {
      background-color: #ffffff;
      height: 80px;
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      position: fixed;
      top: 0;
      left: 0;
      z-index: 10;
    }

    .left-section {
      display: flex;
      align-items: center;
    }

    .brand {
      font-size: 28px;
      font-weight: bold;
      color: #2b6cb0;
      margin-right: 30px;
    }

    .nav-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .nav-buttons button {
      padding: 10px 20px;
      border: 1px solid #ccc;
      border-radius: 9999px;
      background-color: white;
      color: #111;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: 0.2s;
      line-height: 1;
      margin-top: 4px;
    }

    .nav-buttons button:hover {
      background-color: #f1f3f4;
    }

     .login-btn {
      background-color: #38a169;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 9999px;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-top: 4px;
    }

    .login-btn:hover {
      background-color: #2f855a;
    }

    main {
    margin: 100px auto 0;
      padding: 50px;
      max-width: 1100px;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      margin-bottom: 40px;
    }

    h1 {
      font-size: 30px;
      margin-bottom: 10px;
    }

    .staff-list {
      margin-bottom: 30px;
    }

    .staff-item {
      margin: 15px 0;
      padding: 15px;
      background-color: #f9f9f9;
      border: 1px solid #ddd;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .staff-item label {
      font-weight: bold;
    }

    .staff-item select, .staff-item input {
      padding: 10px;
      border-radius: 5px;
      font-size: 14px;
      cursor: pointer;
    }

    button {
      margin-top: 20px;
      padding: 14px;
      background-color: #3498db;
      color: white;
      border: none;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    button:hover {
      background-color: #2980b9;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 30px;
    }

    table th, table td {
      padding: 12px;
      text-align: center;
      border: 1px solid #ddd;
    }

    table th {
      background-color: #3498db;
      color: white;
    }

    .confirmation {
      margin-top: 15px;
      font-weight: bold;
      color: green;
    }

 /* Inline Layout for Date Picker */
.date-wrapper-inline {
  display: flex;
  align-items: center;
  gap: 15px;
  background: #ffffff;
  padding: 15px 20px;
  border-radius: 10px;
  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.06);
  border-left: 5px solid #3498db;
  margin-bottom: 30px;
  width: fit-content;
}

/* Label Styling */
.date-title-inline {
  font-size: 17px;
  font-weight: 600;
  color: #2c3e50;
  font-family: 'Segoe UI', sans-serif;
  white-space: nowrap;
}

/* Styled Inline Date Picker */
.styled-date-inline {
  padding: 12px 16px;
  font-size: 15px;
  border: 2px solid #ccc;
  border-radius: 8px;
  background-color: #f9f9f9;
  transition: all 0.3s ease;
  outline: none;
}

.styled-date-inline:focus {
  border-color: #3498db;
  background-color: #fff;
  box-shadow: 0 0 8px rgba(52, 152, 219, 0.3);
}



    /* Previous Records Section */
    .previous-records {
      margin-top: 30px;
      padding: 15px;
      background-color: #f0f0f0;
      border-radius: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      border: 1px solid #ddd;
    }

    .previous-records h2 {
      margin: 0;
      font-size: 18px;
    }

    .previous-records span {
      font-size: 14px;
      color: #3498db;
      text-decoration: underline;
    }

    .previous-records-table {
      display: none;
      margin-top: 20px;
    }

    .previous-records-table table {
      width: 100%;
      border-collapse: collapse;
    }

    .previous-records-table th,
    .previous-records-table td {
      padding: 12px;
      text-align: center;
      border: 1px solid #ddd;
    }

    .previous-records-table th {
      background-color: #3498db;
      color: white;
    }

    /* Delete Button */
    .delete-btn {
      background-color: #e74c3c;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      margin-left: 10px;
      transition: background-color 0.3s;
    }

    .delete-btn:hover {
      background-color: #c0392b;
    }
  </style>
</head>
<body>

<!-- Header -->
  <div class="header">
    <div class="left-section">
      
      <div class="brand">MeriDukan</div>
      <div class="nav-buttons">
        <button>üè† Home</button>
        <button>About</button>
        <button>Services</button>
        <button>Contact</button>
      </div>
    </div>
    <button class="login-btn">Login</button>
  </div>

<main>
  <h1>Track Staff Attendance</h1>

  <!-- Date Picker -->
 <div class="date-wrapper-inline">
  <label for="attendanceDate" class="date-title-inline">üìÖ Attendance Date:</label>
  <input type="date" id="attendanceDate" class="styled-date-inline" />
</div>



  <!-- Staff Selection Form -->
  <div class="staff-list" id="staffList">
    <h2>Select Staff and Mark Attendance</h2>
    
    <!-- Staff Member Template (Dynamically Added) -->
  </div>

  <button onclick="submitAttendance()">Submit Attendance</button>

  <p class="confirmation" id="confirmationMessage" style="display: none;">‚úÖ Attendance logged successfully!</p>

  <!-- Previous Records Section -->
  <div class="previous-records" onclick="togglePreviousRecords()">
    <h2>View Previous Attendance Records</h2>
    <span>Click to view</span>
  </div>

  <!-- Previous Attendance Table (Hidden by Default) -->
  <div class="previous-records-table" id="previousRecordsTable">
    <table>
      <thead>
        <tr>
          <th>Staff Name</th>
          <th>Status</th>
          <th>Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <!-- Data will be inserted here dynamically -->
      </tbody>
    </table>
  </div>
</main>

<script src="staff.js"></script>
<script>
  // Fetch staff members from localStorage
  function getStaffMembersFromStorage() {
    return JSON.parse(localStorage.getItem('staffList')) || [];
  }

  // Dynamically generate the staff attendance options
  function loadStaff() {
    const staffListDiv = document.getElementById('staffList');
    staffListDiv.innerHTML = ''; // Clear any previous content

    const staffMembers = getStaffMembersFromStorage();
    staffMembers.forEach((staff, index) => {
      const staffId = `staff_${index}`; // Unique ID for select input

      const staffItem = document.createElement('div');
      staffItem.classList.add('staff-item');
      staffItem.innerHTML = `
        <label for="${staffId}">${staff.name}</label>
        <select id="${staffId}">
          <option value="Present">Present</option>
          <option value="Absent">Absent</option>
          <option value="Leave">Leave</option>
        </select>
      `;
      staffListDiv.appendChild(staffItem);
    });
  }

  // Submit Attendance
  function submitAttendance() {
    const date = document.getElementById('attendanceDate').value;
    if (!date) {
      alert('Please select a date');
      return;
    }

    const attendanceList = [];
    const staffMembers = getStaffMembersFromStorage();

    staffMembers.forEach((staff, index) => {
      const status = document.getElementById(`staff_${index}`).value;
      const record = {
        name: staff.name,
        status: status,
        date: date,
      };
      attendanceList.push(record);
    });

    // Store attendance in localStorage
    let allAttendanceRecords = JSON.parse(localStorage.getItem('attendanceList')) || [];
    allAttendanceRecords = allAttendanceRecords.concat(attendanceList);
    localStorage.setItem('attendanceList', JSON.stringify(allAttendanceRecords));

    // Show confirmation message
    document.getElementById('confirmationMessage').style.display = 'block';
    setTimeout(() => {
      document.getElementById('confirmationMessage').style.display = 'none';
    }, 3000);

    // Update the table with the new data
    updateAttendanceTable();
  }

  // Function to update the attendance table with stored records
  function updateAttendanceTable() {
    const attendanceList = JSON.parse(localStorage.getItem('attendanceList')) || [];
    const tableBody = document.querySelector('#previousRecordsTable table tbody');

    tableBody.innerHTML = ''; // Clear the table body

    attendanceList.forEach((record, index) => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${record.name}</td>
        <td>${record.status}</td>
        <td>${record.date}</td>
        <td><button class="delete-btn" onclick="deleteAttendance(${index})">Delete</button></td>
      `;
      tableBody.appendChild(row);
    });
  }

  // Function to delete an attendance record
  function deleteAttendance(index) {
    let allAttendanceRecords = JSON.parse(localStorage.getItem('attendanceList')) || [];
    allAttendanceRecords.splice(index, 1); // Remove the record at the given index
    localStorage.setItem('attendanceList', JSON.stringify(allAttendanceRecords));

    // Update the table after deletion
    updateAttendanceTable();
  }

  // Toggle Previous Records visibility
  function togglePreviousRecords() {
    const table = document.getElementById('previousRecordsTable');
    table.style.display = table.style.display === 'block' ? 'none' : 'block';
  }

  // Initialize on page load
  window.onload = () => {
    loadStaff();
    updateAttendanceTable();
  };
</script>

</body>
</html>
